# Auto Highlight 扩展 - 换行分隔功能使用说明

## 🎉 修改完成

扩展已成功修改为**换行分隔**模式！

## ✨ 新功能

### 现在支持：
- ✅ **每行一个关键字**
- ✅ **关键字内可以包含空格**
- ✅ **像文本编辑器一样使用**
- ✅ **支持长关键字**（如：`[251031] 【DMM】 [SURVIVE MORE] アイドル級に...`）

## 📖 使用方法

### 1. 重新加载扩展

在浏览器中：
1. 打开扩展管理页面
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
2. 找到 "Auto Highlight" 扩展
3. 点击 **刷新/重新加载** 按钮 🔄

### 2. 添加关键字

打开扩展编辑器，在"高亮显示文本"输入框中：

**每行输入一个关键字：**
```
11
[251031] 【DMM】 [SURVIVE MORE] アイドル級に可愛い世間知らずの箱入り娘と周囲に内緒いちゃらぶ関係になり毎日毎晩ヤリまくる話 The Motion Anime
东京 本子
33
44
```

**注意：**
- 按 `Enter` 键换行
- 每行一个关键字
- 关键字内可以包含空格、特殊字符等

### 3. 保存并测试

1. 点击 **保存** 按钮
2. 访问包含这些关键字的网页
3. 关键字应该被高亮显示

## ⚠️ 旧数据迁移

如果你有旧的关键字数据（用空格分隔的），需要手动转换：

### 转换示例

**修改前（空格分隔）：**
```
11 [251031] 东京 本子 33 44
```

**修改后（换行分隔）：**
```
11
[251031] 【DMM】 [SURVIVE MORE] アイドル級に可愛い世間知らずの箱入り娘と周囲に内緒いちゃらぶ関係になり毎日毎晩ヤリまくる話 The Motion Anime
东京 本子
33
44
```

### 转换步骤

1. 打开扩展编辑器
2. 复制现有的关键字文本
3. 在文本编辑器中，将空格替换为换行
4. 粘贴回扩展编辑器
5. 保存

## 🔧 技术细节

### 修改的文件

1. **editor/editor.js**
   - 移除了空格↔换行的数据转换
   - 输入框直接显示和保存换行符

2. **background/background_ah.js**
   - 关键字分割从 `split(" ")` 改为 `split("\n")`
   - eachWord 判断从 `includes(" ")` 改为 `includes("\n")`

### 存储格式

- **旧格式**：关键字用空格分隔存储
- **新格式**：关键字用换行符 `\n` 分隔存储

## 🐛 故障排除

### 问题：高亮不工作

**解决方法：**
1. 确保已重新加载扩展
2. 检查关键字是否正确（每行一个）
3. 清除浏览器缓存并刷新页面

### 问题：旧关键字显示异常

**解决方法：**
1. 打开扩展编辑器
2. 手动将关键字改为每行一个
3. 保存

### 问题：包含空格的关键字被分割

**解决方法：**
- 确保已重新加载扩展
- 如果问题仍然存在，请检查是否有缓存的旧版本

## 📝 示例

### 示例 1：简单关键字

```
JavaScript
Python
React
Vue
```

### 示例 2：包含空格的关键字

```
Hello World
Auto Highlight
Chrome Extension
```

### 示例 3：复杂关键字（你的用例）

```
11
[251031] 【DMM】 [SURVIVE MORE] アイドル級に可愛い世間知らずの箱入り娘と周囲に内緒いちゃらぶ関係になり毎日毎晩ヤリまくる話 The Motion Anime
东京 本子
33
44
55
66
77
```

## ✅ 验证修改

要验证修改是否成功：

1. 打开扩展编辑器
2. 输入包含空格的关键字（如：`Hello World`）
3. 保存
4. 打开包含该关键字的网页
5. 检查 `Hello World` 是否作为**整体**被高亮（而不是分别高亮 `Hello` 和 `World`）

## 🎊 完成！

现在你可以使用包含空格的长关键字了！享受新功能吧！

---

**修改日期：** 2025-11-04  
**版本：** 5.3 (修改版)

